<?xml version="1.0" encoding="utf-8" ?>
<!-- IO监控视图的主要布局文件 -->
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:mycontrol="clr-namespace:KupaKuper_MauiControl.Controls;assembly=KupaKuper_MauiControl"
             xmlns:local="clr-namespace:KupaKuper_HmiView.ContentViewModes"
             x:DataType="local:IoViewVM"
             x:Class="KupaKuper_HmiView.ContentViews.IoView"
             xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui">
    <ContentView.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/MyStyles.xaml;assembly=KupaKuper_MauiControl" />
                <ResourceDictionary Source="/Resources/MyStyles.xaml;assembly=KupaKuper_HmiView" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
        <!-- IO类型切换按钮样式 -->
        <Style x:Key="IoTypeButtonStyle" TargetType="Button">
            <Setter Property="BackgroundColor" Value="Transparent" />
            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource LightTextColor}, Dark={StaticResource DarkTextColor}}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="16,8" />
            <Setter Property="WidthRequest" Value="120" />
            <Setter Property="BorderWidth" Value="2" />
            <Setter Property="BorderColor" Value="{StaticResource Gray400}" />
        </Style>
    </ContentView.Resources>
    
    <!-- 主布局网格 -->
    <Grid RowDefinitions="*,auto" ColumnDefinitions="*" Padding="5">
        <!-- IO点位显示区域 - 使用GraphicsView替换CollectionView -->
        <mycontrol:HmiIoList Grid.Row="0" IoItems="{Binding CurrentIoItems}"/>
        
        <!-- 底部控制栏 -->
        <Grid Grid.Row="1" 
              ColumnDefinitions="*,*" 
              HorizontalOptions="Center" 
              Margin="0,0">
            <!-- 输入IO切换按钮 -->
            <Button Grid.Column="0"
                    Text="输入IO"
                    Command="{Binding ShowInputsCommand}"
                    Style="{StaticResource IoTypeButtonStyle}"
                    BackgroundColor="{Binding IsShowingInputs, Converter={StaticResource BoolToColorConverter}, ConverterParameter='blueColor,Transparent'}"
                    TextColor="{Binding IsShowingInputs, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Default'}"
                    Margin="10,0"/>
            
            <!-- 输出IO切换按钮 -->
            <Button Grid.Column="1"
                    Text="输出IO"
                    Command="{Binding ShowOutputsCommand}"
                    Style="{StaticResource IoTypeButtonStyle}"
                    BackgroundColor="{Binding IsShowingInputs, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Transparent,blueColor'}"
                    TextColor="{Binding IsShowingInputs, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Default,White'}"
                    Margin="10,0"/>
        </Grid>
    </Grid>
</ContentView>